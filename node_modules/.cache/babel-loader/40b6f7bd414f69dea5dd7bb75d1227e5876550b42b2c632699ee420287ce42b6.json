{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./index.css';// Ensure this is at the top of your file\nimport{auth,db}from'./firebase';import Auth from'./Auth';import{collection,addDoc,getDocs,deleteDoc,doc,updateDoc}from'firebase/firestore';// Import Profile component here\n// Assuming you moved the main planner code to a separate Home component for cleaner routing\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[itinerary,setItinerary]=useState({location:'',date:'',activities:''});const[itineraries,setItineraries]=useState([]);const[editIndex,setEditIndex]=useState(null);const[user,setUser]=useState(null);// Listen for authentication state changes\nuseEffect(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{setUser(currentUser);});return()=>unsubscribe();},[]);// Fetch itineraries from Firestore\nconst fetchItineraries=async()=>{try{const itinerariesCollection=collection(db,'itineraries');const itinerariesSnapshot=await getDocs(itinerariesCollection);const itinerariesList=itinerariesSnapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setItineraries(itinerariesList);}catch(error){console.error('Error fetching itineraries:',error);}};// Fetch itineraries on mount\nuseEffect(()=>{fetchItineraries();},[]);const handleSubmit=async e=>{e.preventDefault();try{if(editIndex!==null){// Update itinerary\nconst itineraryDoc=doc(db,'itineraries',itineraries[editIndex].id);await updateDoc(itineraryDoc,itinerary);const updatedItineraries=itineraries.map((item,index)=>index===editIndex?itinerary:item);setItineraries(updatedItineraries);}else{// Save new itinerary\nconst docRef=await addDoc(collection(db,'itineraries'),itinerary);setItineraries([...itineraries,{...itinerary,id:docRef.id}]);}// Reset form\nsetItinerary({location:'',date:'',activities:''});setEditIndex(null);// Reset edit state\n}catch(error){console.error('Error saving itinerary:',error);}};// Handle edit action\nconst handleEdit=index=>{setItinerary(itineraries[index]);setEditIndex(index);};// Handle delete action\nconst handleDelete=async index=>{const itineraryDoc=doc(db,'itineraries',itineraries[index].id);await deleteDoc(itineraryDoc);const updatedItineraries=itineraries.filter((_,i)=>i!==index);setItineraries(updatedItineraries);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App text-center mt-12 px-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-blue-700 mb-6\",children:\"Crowdsourced Itinerary Planner\"}),/*#__PURE__*/_jsx(Auth,{user:user}),user&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-white p-6 rounded-lg shadow-md mt-4 space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:itinerary.location,onChange:e=>setItinerary({...itinerary,location:e.target.value}),required:true,className:\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:itinerary.date,onChange:e=>setItinerary({...itinerary,date:e.target.value}),required:true,className:\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Activities\",value:itinerary.activities,onChange:e=>setItinerary({...itinerary,activities:e.target.value}),required:true,className:\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition duration-200\",children:[editIndex!==null?'Update':'Save',\" Itinerary\"]})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mt-6 mb-2 font-semibold\",children:\"Saved Itineraries\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-none p-0\",children:itineraries.length>0?itineraries.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-white p-4 mb-4 rounded-lg shadow hover:shadow-lg transition duration-200\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-xl\",children:item.location}),\" - \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:item.date}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-700\",children:item.activities}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(index),className:\"text-blue-600 mr-2 hover:underline transition duration-200\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(index),className:\"text-red-600 hover:underline transition duration-200\",children:\"Delete\"})]})]},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No itineraries saved yet.\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","auth","db","Auth","collection","addDoc","getDocs","deleteDoc","doc","updateDoc","jsx","_jsx","jsxs","_jsxs","App","itinerary","setItinerary","location","date","activities","itineraries","setItineraries","editIndex","setEditIndex","user","setUser","unsubscribe","onAuthStateChanged","currentUser","fetchItineraries","itinerariesCollection","itinerariesSnapshot","itinerariesList","docs","map","id","data","error","console","handleSubmit","e","preventDefault","itineraryDoc","updatedItineraries","item","index","docRef","handleEdit","handleDelete","filter","_","i","className","children","onSubmit","type","placeholder","value","onChange","target","required","length","onClick"],"sources":["G:/ww/crowdsourced-itinerary-planner/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './index.css'; // Ensure this is at the top of your file\r\nimport { auth, db } from './firebase';\r\nimport Auth from './Auth';\r\nimport { collection, addDoc, getDocs, deleteDoc, doc, updateDoc } from 'firebase/firestore';\r\n// Import Profile component here\r\n // Assuming you moved the main planner code to a separate Home component for cleaner routing\r\n\r\n\r\nfunction App() {\r\n  const [itinerary, setItinerary] = useState({ location: '', date: '', activities: '' });\r\n  const [itineraries, setItineraries] = useState([]);\r\n  const [editIndex, setEditIndex] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Listen for authentication state changes\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(currentUser => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Fetch itineraries from Firestore\r\n  const fetchItineraries = async () => {\r\n    try {\r\n      const itinerariesCollection = collection(db, 'itineraries');\r\n      const itinerariesSnapshot = await getDocs(itinerariesCollection);\r\n      const itinerariesList = itinerariesSnapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setItineraries(itinerariesList);\r\n    } catch (error) {\r\n      console.error('Error fetching itineraries:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch itineraries on mount\r\n  useEffect(() => {\r\n    fetchItineraries();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editIndex !== null) {\r\n        // Update itinerary\r\n        const itineraryDoc = doc(db, 'itineraries', itineraries[editIndex].id);\r\n        await updateDoc(itineraryDoc, itinerary);\r\n        const updatedItineraries = itineraries.map((item, index) => \r\n          index === editIndex ? itinerary : item\r\n        );\r\n        setItineraries(updatedItineraries);\r\n      } else {\r\n        // Save new itinerary\r\n        const docRef = await addDoc(collection(db, 'itineraries'), itinerary);\r\n        setItineraries([...itineraries, { ...itinerary, id: docRef.id }]);\r\n      }\r\n  \r\n      // Reset form\r\n      setItinerary({ location: '', date: '', activities: '' });\r\n      setEditIndex(null); // Reset edit state\r\n    } catch (error) {\r\n      console.error('Error saving itinerary:', error);\r\n    }\r\n  };\r\n\r\n  // Handle edit action\r\n  const handleEdit = (index) => {\r\n    setItinerary(itineraries[index]);\r\n    setEditIndex(index);\r\n  };\r\n\r\n  // Handle delete action\r\n  const handleDelete = async (index) => {\r\n    const itineraryDoc = doc(db, 'itineraries', itineraries[index].id);\r\n    await deleteDoc(itineraryDoc);\r\n    const updatedItineraries = itineraries.filter((_, i) => i !== index);\r\n    setItineraries(updatedItineraries);\r\n  };\r\n  \r\n \r\n  return (\r\n    \r\n    <div className=\"App text-center mt-12 px-4\">\r\n      <h1 className=\"text-4xl font-bold text-blue-700 mb-6\">Crowdsourced Itinerary Planner</h1>\r\n      <Auth user={user} />\r\n\r\n      {user && (\r\n        <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded-lg shadow-md mt-4 space-y-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Location\"\r\n            value={itinerary.location}\r\n            onChange={(e) => setItinerary({ ...itinerary, location: e.target.value })}\r\n            required\r\n            className=\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            value={itinerary.date}\r\n            onChange={(e) => setItinerary({ ...itinerary, date: e.target.value })}\r\n            required\r\n            className=\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"\r\n          />\r\n          <textarea\r\n            placeholder=\"Activities\"\r\n            value={itinerary.activities}\r\n            onChange={(e) => setItinerary({ ...itinerary, activities: e.target.value })}\r\n            required\r\n            className=\"border border-gray-300 p-3 rounded w-full text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200\"\r\n          />\r\n          <button type=\"submit\" className=\"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition duration-200\">\r\n            {editIndex !== null ? 'Update' : 'Save'} Itinerary\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      <h2 className=\"text-2xl mt-6 mb-2 font-semibold\">Saved Itineraries</h2>\r\n      <ul className=\"list-none p-0\">\r\n        {itineraries.length > 0 ? (\r\n          itineraries.map((item, index) => (\r\n            <li key={item.id} className=\"bg-white p-4 mb-4 rounded-lg shadow hover:shadow-lg transition duration-200\">\r\n              <strong className=\"text-xl\">{item.location}</strong> - <span className=\"text-gray-600\">{item.date}</span>\r\n              <p className=\"mt-2 text-gray-700\">{item.activities}</p>\r\n              <div className=\"mt-4\">\r\n                <button onClick={() => handleEdit(index)} className=\"text-blue-600 mr-2 hover:underline transition duration-200\">\r\n                  Edit\r\n                </button>\r\n                <button onClick={() => handleDelete(index)} className=\"text-red-600 hover:underline transition duration-200\">\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </li>\r\n          ))\r\n        ) : (\r\n          <p className=\"text-gray-500\">No itineraries saved yet.</p>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}